<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><script id="bug.surrogate.35">var GA_googleFillSlot=GA_googleFetchAds=GA_googleAddSlot=GS_googleEnableAllServices=GS_googleAddAdSenseService=function(){};</script><script id="bug.surrogate.1">var urchinTracker=function(){},_gaq={push:function(){try {if(arguments[0][0]=='_link')window.location.href=arguments[0][1]}catch(er){}}},_gat={_createTracker:function(){}, _getTracker:function(){return{__noSuchMethod__:function(){},_link:function(o){if(o)location.href=o;},_linkByPost:function(){return true;},_getLinkerUrl:function(o){return o;},_trackEvent:function(){}}}};</script><head>
	<title>OpenGL Video Tutorial - Textures</title>
	<meta name="title" content="OpenGL Video Tutorial - Textures">
	<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
	<meta name="description" content="Free beginner-friendly OpenGL / GLUT tutorial for C++, including both video and text versions.">
	<meta name="keywords" content="OpenGL, GLUT, OpenGL tutorial, OpenGL tutorials, free, GLUT tutorial, GLUT tutorials, OpenGL video tutorial, OpenGL video tutorials, video, videos, GLUT video tutorial, GLUT video tutorials, video tutorial, video tutorials, 3D, 3-D, Windows, Mac, OS X, Mac OS X, MacOSX, Linux, C, C++, Visual C++, programming, 3D programming, 3-D programming, reference, forum, forums">
	<meta name="author" content="Bill Jacobs">
	<meta name="designer" content="Bill Jacobs">
	<meta name="copyright" content="© 2007 - 2008 Bill Jacobs">
	<link href="OpenGL%20Video%20Tutorial%20-%20Textures_files/styles.css" rel="stylesheet" type="text/css">
	<!--[if lte IE 6]>
		<style type="text/css">
			#container {
				width: expression(document.documentElement.clientWidth < 808 ? "808px" : "auto");
			}
		</style>
	<![endif]-->
	<!--[if gte IE 5]>
		<style type="text/css">
			#topads {
				width: expression(document.body.clientWidth > 160 ? "160px" : "auto");
			}
		</style>
	<![endif]-->
<style>@-webkit-keyframes popxcxzegviitcsnnyitqjpalkzqbatpmhrq {50% {-webkit-transform:scale(1.2);}100% {-webkit-transform:scale(1);}}@keyframes popxcxzegviitcsnnyitqjpalkzqbatpmhrq {50% {-webkit-transform:scale(1.2);transform:scale(1.2);}100% {-webkit-transform:scale(1);transform:scale(1);}}#xcxzegviitcsnnyitqjpalkzqbatpmhrq{padding:0;margin:0;font:13px Arial,Helvetica;text-transform:none;font-size: 100%;vertical-align:baseline;line-height:normal;color:#fff;position:static;border:solid 2px #fff !important;color:#fff !important;display:block !important;height:auto !important;margin:0 !important;opacity:0.9 !important;padding:7px 10px !important;position:fixed !important;visibility:visible !important;width:auto !important;z-index:2147483647 !important;-moz-border-radius:5px !important;border-radius:5px !important;-moz-box-shadow:0px 0px 20px #000 !important;box-shadow:0px 0px 20px #000 !important;}.xcxzegviitcsnnyitqjpalkzqbatpmhrq-blocked{padding:0;margin:0;font:13px Arial,Helvetica;text-transform:none;font-size: 100%;vertical-align:baseline;line-height:normal;color:#fff;position:static;color:#AAA !important;display:inline !important;text-decoration:line-through !important;}#xcxzegviitcsnnyitqjpalkzqbatpmhrq br{display:block !important;padding:0;margin:0;font:13px Arial,Helvetica;text-transform:none;font-size: 100%;vertical-align:baseline;line-height:normal;color:#fff;position:static;}#xcxzegviitcsnnyitqjpalkzqbatpmhrq span{background:transparent !important;padding:0;margin:0;font:13px Arial,Helvetica;text-transform:none;font-size: 100%;vertical-align:baseline;line-height:normal;color:#fff;position:static;}#xcxzegviitcsnnyitqjpalkzqbatpmhrq div{padding:0;margin:0;font:13px Arial,Helvetica;text-transform:none;font-size: 100%;vertical-align:baseline;line-height:normal;color:#fff;position:static;border:0 !important;margin:0 !important;padding:0 !important;width:auto !important;letter-spacing:normal !important;font:13px Arial,Helvetica !important;text-align:left !important;text-shadow:none !important;text-transform:none !important;word-spacing:normal !important;}#xcxzegviitcsnnyitqjpalkzqbatpmhrq a{padding:0;margin:0;font:13px Arial,Helvetica;text-transform:none;font-size: 100%;vertical-align:baseline;line-height:normal;color:#fff;position:static;font-weight:normal !important;background:none !important;text-decoration:underline !important;color:#fff !important;}a#xcxzegviitcsnnyitqjpalkzqbatpmhrq-gear{padding:0;margin:0;font:13px Arial,Helvetica;text-transform:none;font-size: 100%;vertical-align:baseline;line-height:normal;color:#fff;position:static;text-decoration:none !important;position:absolute !important;display:none !important;font-size:20px !important;width:20px !important;height:20px !important;line-height:20px !important;text-align:center !important;background-color:rgba(255,255,255,.8) !important;background-image:url(resource://firefox-at-ghostery-dot-com/ghostery/data/images/gear.svg) !important;background-size:16px 16px !important;background-position:center center !important;background-repeat:no-repeat !important;text-decoration:none !important;}a#xcxzegviitcsnnyitqjpalkzqbatpmhrq-gear:hover{-webkit-animation-name:popxcxzegviitcsnnyitqjpalkzqbatpmhrq !important;animation-name:popxcxzegviitcsnnyitqjpalkzqbatpmhrq !important;-webkit-animation-duration:0.3s !important;animation-duration:0.3s !important;}#xcxzegviitcsnnyitqjpalkzqbatpmhrq:hover #xcxzegviitcsnnyitqjpalkzqbatpmhrq-gear{text-decoration:none !important;display:inline-block !important;}#xcxzegviitcsnnyitqjpalkzqbatpmhrq hr{visibility:hidden !important;padding:0;margin:0;font:13px Arial,Helvetica;text-transform:none;font-size: 100%;vertical-align:baseline;line-height:normal;color:#fff;position:static;height:1em;}@media print{#xcxzegviitcsnnyitqjpalkzqbatpmhrq{display:none !important;}}</style></head>

<body bgcolor="#B0E0FF">
<div id="dic_bubble" class="selection_bubble fontSize13 noSelect" style="z-index:9999; border: 1px solid #4AAEDE;fetching=false"></div><div id="container">
	<div id="header">
		<img src="OpenGL%20Video%20Tutorial%20-%20Textures_files/top_icon.png" alt="3D Video Tutorials Rock.com logo" height="101" width="165"><h1>OpenGL tutorial</h1>
	</div>
	
	<div id="menu1">
		<ul>
			<li><a href="http://www.videotutorialsrock.com/index.php">Home</a></li><li><a href="http://www.videotutorialsrock.com/intro.php">Intro</a></li><li><a href="http://www.videotutorialsrock.com/opengl_tutorial/reference.php">Reference</a></li>
		</ul>
	</div>
	
	<div id="content">
		<div id="mainbody">

<center><h1>Lesson 5: Textures</h1></center>
<center><div class="lessonlinks">
	<div class="watchnow"><a href="http://www.videotutorialsrock.com/opengl_tutorial/textures/video.php">Watch the video now!</a></div>
	<ul>	<li><a href="http://www.videotutorialsrock.com/opengl_tutorial/textures/home.php">Summary</a></li><li>*</li>
	<li>Text version</li><li>*</li>
	<li><a href="http://www.videotutorialsrock.com/opengl_tutorial/textures/exercises.php">Exercises</a></li><li>*</li>
	<li><a href="http://www.videotutorialsrock.com/opengl_tutorial/textures/textures.zip">Download source</a></li></ul>
</div></center>
<center><div class="horizontaladslong">
	<script type="text/javascript"><!--
google_ad_client = "pub-9144854455296170";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "A0A0A0";
google_color_bg = "B8FFB8";
google_color_link = "000080";
google_color_text = "800000";
google_color_url = "008000";
//-->
</script>

</div></center>
<center><h2>What Are Textures, and Why Do We Use Them?</h2></center>
<p>
A lot of the time, we'll want to put pictures, or "textures", on our 3D 
polygons, instead of just color.  There are two main reasons for this.  
The first one is more obvious; we might want to give the shape some 
detailed appearance.  For example, it's much easier to make a person's 
face if we take a picture of a face and apply the texture to a few 
polygons in the face, than if we have a million tiny colored faces.  The
 second reason is that we might want to approximate the lit appearance 
of some small feature, without adding tons of polygons.  For example, 
using textures, we can make a golf ball look like it has dimples, as in 
the below picture:
</p>
<center><img src="OpenGL%20Video%20Tutorial%20-%20Textures_files/golf.png" alt="Textured golf ball" height="297" width="300" border="3"></center>
<p>
Okay, so it looks a little cruddy, but it gives you the idea.  The above
 picture has relatively few polygons, as you can observe if you look at 
its outline.  It gives the appearance of having dimples by applying 
textures to its faces.  Rather than using textures, we could just add 
tons of polygons to the figure, but there this would slow down drawing, 
and it would be a lot of work to figure out the extra points and faces 
that we want to add.  This technique is indispensible to computer 
graphics, and is especially visible on PlayStation 1 and Nintendo 64 
games.
</p><p>
The downside to using textures to simulate small features is that it 
doesn't respond correctly to lighting.  For example, if we shine light 
nearly parallel to a given face on the golf ball, one side of the dimple
 should be light and the other should be dark, but this won't happen if 
we're using textures.  Still, it's better than nothing, and it has the 
advantages I mentioned over adding extra polygons.
</p>
<center>
<script type="text/javascript"><!--
google_ad_client = "pub-9144854455296170";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "A0A0A0";
google_color_bg = "B8FFB8";
google_color_link = "000080";
google_color_text = "800000";
google_color_url = "008000";
//-->
</script>
<script type="text/javascript" src="OpenGL%20Video%20Tutorial%20-%20Textures_files/show_ads.js">
</script>
</center>

<center><h2>Textures in OpenGL</h2></center>
<p>
Let's get down to some code.  First, take a look at what our finished program will look like.
</p>
<center><img src="OpenGL%20Video%20Tutorial%20-%20Textures_files/screenshot.png" alt="Texture program screenshot" height="434" width="408" border="3"></center>
<p>
To make a figure like this, the first thing we have to do is load an 
image with the texture we want.  We want to take a picture file and get 
it into an array of characters (R1, G1, B1, R2, G2, B2, ...) indicating 
the color of each pixel in the image.  Each component ranges from 0 to 
255.  Our array will start with the lower-left pixel, then progress to 
the right end of the row, then move upward to the next column, and so 
on.  This is the format in which OpenGL likes our images.
</p><p>
I've written a <kbd>loadBMP</kbd> function to load bitmap images for us.
  Bitmaps take up a lot of space compared to image formats, like .PNG, 
but I chose to use bitmaps because they are relatively easy to load into
 format that we need.  The <kbd>loadBMP</kbd> function isn't all that 
long or complicated (other than the memory management stuff I'm doing to
 make sure that the program doesn't leak memory).  I made it using 
information about the bitmap file format on Wikipedia.  At any rate, you
 don't have to know how it works; all you have to know is what it does.
</p><p>
Take a look at imageloader.h.  This gives us the basic idea of what <kbd>loadBMP</kbd> does.  (The actual code for <kbd>loadBMP</kbd> is in imageloader.cpp.)  Given a filename, it returns an <kbd>Image</kbd> object, which contains the width and height of the image, as well as the array <kbd>pixels</kbd>, which stores the pixels' colors in the format we want.
</p><p>
Once we've got the image, we have to send it to OpenGL.  We do this in a function we write called <kbd>loadTexture</kbd>.
</p><div class="codeblock"><pre><span class="codecomment">//Makes the image into a texture, and returns the id of the texture</span>
GLuint loadTexture(Image *image) {</pre></div><p>
Our <kbd>loadTexture</kbd> function takes an <kbd>Image</kbd> object and returns a <kbd>GLuint</kbd> (which is kind of like an <kbd>unsigned int</kbd>) giving the id that OpenGL assigned to the texture.
</p><div class="codeblock"><pre>    GLuint textureId;
    glGenTextures(1, &amp;textureId); <span class="codecomment">//Make room for our texture</span></pre></div><p>
First, we tell OpenGL to make room for the texture, by calling <kbd>glGenTextures</kbd>.
  The first argument is the number of textures we need, and the second 
is an array where OpenGL will store the id's of the textures.  In this 
case, the second argument is an "array" of size 1.  By C++ magic, using <kbd>&amp;textureId</kbd> as the second argument will result in having <kbd>textureId</kbd> store the id of our one texture.
</p><div class="codeblock"><pre>    glBindTexture(GL_TEXTURE_2D, textureId); <span class="codecomment">//Tell OpenGL which texture to edit</span>
    <span class="codecomment">//Map the image to the texture</span>
    glTexImage2D(GL_TEXTURE_2D,                <span class="codecomment">//Always GL_TEXTURE_2D</span>
                 0,                            <span class="codecomment">//0 for now</span>
                 GL_RGB,                       <span class="codecomment">//Format OpenGL uses for image</span>
                 image-&gt;width, image-&gt;height,  <span class="codecomment">//Width and height</span>
                 0,                            <span class="codecomment">//The border of the image</span>
                 GL_RGB, <span class="codecomment">//GL_RGB, because pixels are stored in RGB format</span>
                 GL_UNSIGNED_BYTE, <span class="codecomment">//GL_UNSIGNED_BYTE, because pixels are stored</span>
                                   <span class="codecomment">//as unsigned numbers</span>
                 image-&gt;pixels);               <span class="codecomment">//The actual pixel data</span></pre></div><p>
Now, we have to assign the texture id to our image data.  We call <kbd>glBindTexture(GL_TEXTURE_2D, textureId)</kbd> to let OpenGL know that we want to work with the texture we just created.  Then, we call <kbd>glTexImage2D</kbd>
 to load the image into OpenGL.  The comments explicate what each of the
 arguments is, although you don't really need to understand all of them.
  OpenGL will copy our pixel data, so after this call, we can free the 
memory used by the image using <kbd>delete</kbd>.  (We don't do this here; we do it elsewhere in main.cpp.)
</p><p>
Note that we should only use images whose widths and heights are 64, 
128, or 256, since computers like powers of 2.  Other sizes of images 
might not work properly.
</p><div class="codeblock"><pre>    <span class="codekeyword">return</span> textureId; <span class="codecomment">//Returns the id of the texture</span>
}</pre></div><p>
Last, but not least, we return the id of the texture.
</p><p>
We want to load the file "vtr.bmp" as an image and make it into an OpenGL texture, so we add the following to <kbd>initRendering</kbd>:
</p><div class="codeblock"><pre>    Image* image = loadBMP("vtr.bmp");
    _textureId = loadTexture(image);
    <span class="codekeyword">delete</span> image;</pre></div><p>
It's pretty straightforward.  We load the image, then load the texture into OpenGL, then delete the <kbd>Image</kbd> object, since we don't need it any more.
</p><p>
On to <kbd>drawScene</kbd>.  We start by calling <kbd>glEnable(GL_TEXTURE_2D)</kbd> to enable applying textures and <kbd>glBindTexture(GL_TEXTURE_2D, _textureId)</kbd> to tell OpenGL that we want to use the texture with id <kbd>_textureId</kbd>.
</p><p>
Now, we have to set up how we want OpenGL to map our texture.  To 
understand what this means, we have to know a little more about texture 
mapping.
</p>
<center><img src="OpenGL%20Video%20Tutorial%20-%20Textures_files/zoom.png" alt="Texture mapping diagram" height="274" width="471" border="3"></center>
<p>
Each pixel that we draw for a textured polygon corresponds to a point on
 our image.  For example, it might correspond to the green point in the 
above picture.  OpenGL has to figure out what color to make the pixel.  
The most straightforward approach is to take the color of the nearest 
texel (texture pixel), light blue in this case.  But this makes our 
texture look blocky, like in the bottom face of the screenshot of our 
program.  You may have seen blocky textures in games when you got really
 close to a wall or other object; they use this type of mapiping.  A 
better idea is to average the colors of the texels surrounding the 
point.  In the example, we would take a weighted average of the light 
blue texel on which the point lies along along with the one above it, 
the one to its left, and the one above it and to its left.  Using this 
method makes the image look blurry instead of blocky, which is usually 
better.  In general, there's little reason to use the blocky mapping, in
 my opinion.
</p><p>
Just for kicks, we use the blocky mapping style on the bottom face.  To do this, we call <kbd>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST)</kbd> and <kbd>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST)</kbd>.  The first call tells OpenGL to use the blocky mapping (<kbd>GL_NEAREST</kbd>)
 when the texture is far away from us, and the second call tells it to 
use blocky mapping when the texture is close.  If we wanted to use 
blurry mapping, we'd pass <kbd>GL_LINEAR</kbd> as the third parameter of
 these two functions.  If you want to see what the program looks like 
when it uses the blurry mapping, comment these two lines out and 
uncomment the two lines beneath it.
</p><p>
Now, we call <kbd>glColor3f(1.0f, 0.2f, 0.2f)</kbd> to apply a color to 
our texture.  The call makes the image look reddish.  Why are we doing 
this?  Beats me.  I just wanted to show you that you can do it.  The 
call tells OpenGL to multiply the green and blue components of the image
 by 0.2.  If we didn't want to color the image, we'd call <kbd>glColor3f(1.0f, 1.0f, 1.0f)</kbd> instead.  By the way, you can even apply color blending to a texture.
</p><div class="codeblock"><pre>    glBegin(GL_QUADS);
    
    glNormal3f(0.0, 1.0f, 0.0f);
    glTexCoord2f(0.0f, 0.0f);
    glVertex3f(-2.5f, -2.5f, 2.5f);
    glTexCoord2f(1.0f, 0.0f);
    glVertex3f(2.5f, -2.5f, 2.5f);
    glTexCoord2f(1.0f, 1.0f);
    glVertex3f(2.5f, -2.5f, -2.5f);
    glTexCoord2f(0.0f, 1.0f);
    glVertex3f(-2.5f, -2.5f, -2.5f);
    
    glEnd();</pre></div><p>
Now, in addition to a normal vector, each vertex has a texture 
coordinate.  The texture coordinates indicates to what point on the 
image each vertex maps.  The texture coordinate (a + b, c + d), where a 
and c are integers, indicates the spot that is the fractional amount b 
above the bottom of the texture and the fractional amount d right of the
 left of the texture.  To specify the texture coordinates of a vertex, 
we simply call <kbd>glTexCoord2f</kbd> with the texture coordinates we want before calling <kbd>glVertex3f</kbd> for the vertex.
</p><div class="codeblock"><pre>    <span class="codecomment">//Back</span>
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glColor3f(1.0f, 1.0f, 1.0f);</pre></div><p>
For the face in the back, we want to use blurry texture mapping, so we call <kbd>glTexParameteri</kbd> with <kbd>GL_LINEAR</kbd> as the last argument.  Then, we call <kbd>glColor3f(1.0f, 1.0f, 1.0f)</kbd> so that the image doesn't have any kind of coloring.  Note that we don't have to call <kbd>glBindTexture</kbd> again to set the texture; OpenGL just stays with the same texture.
</p><div class="codeblock"><pre>    glBegin(GL_TRIANGLES);
    
    glNormal3f(0.0f, 0.0f, 1.0f);
    glTexCoord2f(0.0f, 0.0f);
    glVertex3f(-2.5f, -2.5f, -2.5f);
    glTexCoord2f(5.0f, 5.0f);
    glVertex3f(0.0f, 2.5f, -2.5f);
    glTexCoord2f(10.0f, 0.0f);
    glVertex3f(2.5f, -2.5f, -2.5f);
    
    glEnd();</pre></div><p>
We specify the normal, texture coordinates, and vertices of the triangle
 in the back.  Notice that the way we have the texture coordinates set 
up, our image will be repeated and squished over the face of the 
triangle, as in the screenshot of our program.
</p><div class="codeblock"><pre>    <span class="codecomment">//Left</span>
    glDisable(GL_TEXTURE_2D);
    glColor3f(1.0f, 0.7f, 0.3f);
    glBegin(GL_QUADS);
    
    glNormal3f(1.0f, 0.0f, 0.0f);
    glVertex3f(-2.5f, -2.5f, 2.5f);
    glVertex3f(-2.5f, -2.5f, -2.5f);
    glVertex3f(-2.5f, 2.5f, -2.5f);
    glVertex3f(-2.5f, 2.5f, 2.5f);
    
    glEnd();</pre></div><p>
Now, we want to switch back to using colors instead of textures, so we call <kbd>glDisable(GL_TEXTURE_2D)</kbd> to disable textures and then make a colored face like in previous lessons.
</p><p>
And that's the way textures work in OpenGL.
</p>









<p><i>Next is <a href="http://www.videotutorialsrock.com/opengl_tutorial/cube/home.php">"Lesson 6: Putting It All Together"</a>.</i></p><center><div class="lessonlinks">
	<ul>	<li><a href="http://www.videotutorialsrock.com/opengl_tutorial/textures/home.php">Summary</a></li><li>*</li>
	<li>Text version</li><li>*</li>
	<li><a href="http://www.videotutorialsrock.com/opengl_tutorial/textures/exercises.php">Exercises</a></li><li>*</li>
	<li><a href="http://www.videotutorialsrock.com/opengl_tutorial/textures/textures.zip">Download source</a></li></ul>
</div></center>

		<center><div class="horizontaladslong">
<script type="text/javascript"><!--
google_ad_client = "pub-9144854455296170";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
google_ad_channel = "";
google_color_border = "A0A0A0";
google_color_bg = "B8FFB8";
google_color_link = "000080";
google_color_text = "800000";
google_color_url = "008000";
//-->
</script>
<script type="text/javascript" src="OpenGL%20Video%20Tutorial%20-%20Textures_files/show_ads.js">
</script>
		</div></center>
	</div>
</div>

	<div id="footer">
		<ul>
			<li><a href="http://www.videotutorialsrock.com/index.php">Home</a></li><li>|</li>
			<li><a href="http://www.videotutorialsrock.com/intro.php">Intro</a></li><li>|</li>
						<li><a href="http://www.videotutorialsrock.com/opengl_tutorial/reference.php">Quick Reference</a></li><li>|</li>
			<li><a href="http://www.videotutorialsrock.com/links.php">Links</a></li><li>|</li>
			<li><a href="http://www.videotutorialsrock.com/about.php">About</a></li><li>|</li>
			<li><a href="http://www.videotutorialsrock.com/contact.php">Contact</a></li>
		</ul>
		<center><table><tbody><tr><td>
<a href="http://validator.w3.org/check/referer" target="_blank"><img src="OpenGL%20Video%20Tutorial%20-%20Textures_files/valid_xhtml.png" alt="Valid XHTML" height="31" width="88" align="bottom" border="0"></a>
		</td><td><center><p>© 2007 - 2014 Bill Jacobs<br>"Rock on!" - Bill</p></center></td><td>
<a href="http://jigsaw.w3.org/css-validator/check/referer" target="_blank"><img src="OpenGL%20Video%20Tutorial%20-%20Textures_files/valid_css.png" alt="Valid CSS" height="31" width="88" align="bottom" border="0"></a>
		</td></tr></tbody></table></center>
	</div>
</div>


<script type="text/javascript">
_uacct = "UA-1957485-1";
urchinTracker();
</script>



</body></html>